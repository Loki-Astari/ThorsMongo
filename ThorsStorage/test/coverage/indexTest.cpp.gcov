        -:    0:Source:indexTest.cpp
        -:    0:Graph:coverage/indexTest.gcno
        -:    0:Data:coverage/indexTest.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:#include "gtest/gtest.h"
        -:    2:
        -:    3:#include "file.h"
        -:    4:#include "test/Person.h"
        -:    5:#include "test/TestFileClass.h"
        -:    6:
        -:    7:namespace TC=ThorsAnvil::FileSystem::ColumnFormat;
        -:    8:
        -:    9:using IndexTest = SimpleTestDir;
        1:   10:
        4:   11:TEST_F(IndexTest, indexFileCheck)
        1:   12:{
        -:   13:    {
        2:   14:        TC::OFile<TwoPeople>    file(simpleTestDir);
        2:   15:        file << TwoPeople{Person{"Martin" ,20}, Person{"Loki", 22}};
        2:   16:        ASSERT_TRUE(file);
        2:   17:    }
        1:   18:    std::size_t     index;
        2:   19:
        3:   20:    std::fstream    index1((simpleTestDir + simpleP1NameI).c_str());
        2:   21:    ASSERT_TRUE(index1);
        1:   22:
        1:   23:    index1.read(reinterpret_cast<char*>(&index), sizeof index);
        2:   24:    ASSERT_TRUE(index1);
        1:   25:
        2:   26:    ASSERT_EQ(index, 7);    // Martin + '\n'
        -:   27:
        -:   28:
        1:   29:    std::fstream    index2((simpleTestDir + simpleP1NameI).c_str());
        1:   30:    ASSERT_TRUE(index2);
        -:   31:
        1:   32:    index2.read(reinterpret_cast<char*>(&index), sizeof index);
        1:   33:    ASSERT_TRUE(index2);
        -:   34:
        1:   35:    ASSERT_EQ(index, 7);    // Loki + '\n'
        1:   36:}
